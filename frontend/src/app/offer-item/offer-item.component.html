<div style="overflow-x:auto;">

  <div class="item">
    <div [hidden]="(editing || showDelete || showSetPublic || showDeny)">
      <p class="title">{{offerItem.title}}</p>
      <table>
        <tr>
          <th>About the offer</th>
          <td><p class="description">{{offerItem.description}}</p></td>
        </tr>
        <tr>
          <th>Price</th>
          <td><span class="price">{{offerItem.price}}</span></td>
        </tr>
        <tr>
          <th>Availability</th>
          <td><span class="availability">{{displayDateFrom}} - {{displayDateTo}}</span></td>
        </tr>
      </table>
      <button (click)="hideContactData=false; getContactInfo()" [hidden]="!hideContactData || !isLoggedIn">Show Contact Data</button>
      <button (click)="hideContactData=true" [hidden]="hideContactData || !isLoggedIn">Hide Contact Data</button>
       <div class="contactData" [hidden]="hideContactData">
          <table>
          <tr>
            <th>Username</th>
            <th>{{contactData.username}}</th>
          </tr>
          <tr>
            <th>Tel</th>
            <th>{{contactData.tel}}</th>
          </tr>
          <tr>
            <th>E-Mail</th>
            <th>{{contactData.email}}</th>
          </tr>
          </table>
        </div>
        <button style="background-color:#b81700" (click)="showDelete=true"
                [hidden]="!isAdmin && (!offerItem.canBeDeleted || !isLoggedIn)">Delete
        </button>
        <button style="background-color:#0ab84b" (click)="showSetPublic=true"
                [hidden]="!offerItem.canBeSetPublic || !isAdmin">Set Public
        </button>
        <button (click)="showDeny=true" [hidden]="!offerItem.canBeSetPublic || !isAdmin">Deny request</button>
        <button (click)="onEdit()" [hidden]="!offerItem.canBeEdited || !isLoggedIn">Edit</button>
      <div [hidden]="!showDelete">
        <p>Are you sure you want to delete {{offerItem.title}}?</p>
        <button (click)="onDelete(); showDelete=false">Delete</button>
        <button (click)="showDelete=false">Cancel</button>
      </div>
      <div [hidden]="!showSetPublic">
        <p>Are you sure you want to set {{offerItem.title}} to public? This can be undone only by deleting the offer, or
          by the user changing it.</p>
        <button (click)="onSetPublic(); showSetPublic=false">Set public</button>
        <button (click)="showSetPublic=false">Cancel</button>
      </div>
      <div [hidden]="!showDeny">
        <p>Are you sure you want to deny this form? (Please send the user an email explaining why)</p>
        <button (click)="onDeny(); showDeny=false">Clear form</button>
        <button (click)="showDeny=false">Cancel</button>
      </div>


      <div>
        <form (ngSubmit)="onSubmit()" #editForm="ngForm" [hidden]="!editing">
          <p>Note: Fields with an asterisk (*) must be filled in, other fields may be left empty.</p>
          <div class="form-group">
            <label for="title">Title*</label>
            <input type="text" class="form-control" id="title" [(ngModel)]="offerItem.title" name="title"
                   #title="ngModel"
                   required/>
            <div [hidden]="title.valid || title.pristine" class="alert alert-danger">
              You need a title for your offer.
            </div>
          </div>
          <div class="form-group">
            <label for="description">Description*</label>
            <textarea type="text" class="form-control" id="description" [(ngModel)]="offerItem.description"
                      name="description"
                      #description="ngModel" required>{{offerItem.description}}</textarea>
            <div [hidden]="description.valid || description.pristine" class="alert alert-danger">
              You need a description for your offer.
            </div>
          </div>
          <div class="form-group">
            <label for="price">Price (per day/night; if billing is for another type, please leave empty and note in the
              description)</label>
            <input type="int" class="form-control" id="price" [(ngModel)]="offerItem.price" name="price"
                   #price="ngModel"/>
          </div>
          <div class="form-group">
            <label for="dateFrom">From:</label>
            <input [matDatepicker]="myDatepicker1" type="text" class="form-control" id="dateFrom"
                   [(ngModel)]="offerItem.dateFrom" name="dateFrom" #dateFrom="ngModel">
            <mat-datepicker-toggle matSuffix [for]="myDatepicker1"></mat-datepicker-toggle>
            <mat-datepicker #myDatepicker1></mat-datepicker>
          </div>
          <div class="form-group">
            <label for="dateTo">To:</label>
            <input [matDatepicker]="myDatepicker2" type="text" class="form-control" id="dateTo"
                   [(ngModel)]="offerItem.dateTo" name="dateTo" #dateTo="ngModel">
            <mat-datepicker-toggle matSuffix [for]="myDatepicker2"></mat-datepicker-toggle>
            <mat-datepicker #myDatepicker2></mat-datepicker>
          </div>
          <div class="form-group">
            <label for="category">Category</label>
            <select class="form-control" id="category"
                    [(ngModel)]="offerItem.category" name="category" required>
              <option *ngFor="let cat of categories" [value]="cat">{{cat}}</option>
            </select>
          </div>
          <button type="submit" class="btn btn-success" [disabled]="!editForm.form.valid" (click)="onSave()">Save
            offer
          </button>
          <button (click)="onCancel()">Cancel</button>
        </form>
      </div>
    </div>
  </div>
