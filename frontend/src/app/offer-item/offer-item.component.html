<div style="overflow-x:auto;">

  <div class="item">
    <mat-card [hidden]="editing">
      <mat-card-header>
        <mat-card-title class="title">{{offerItem.title}}</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <p class="label"> About the offer:</p>
        <p class="description">{{offerItem.description}}</p>
        <p class="label">Price:</p>
        <span class="price">{{offerItem.price}}</span><br />
        <p class="label">Availability</p>
        <span class="availability">{{displayDateFrom}} - {{displayDateTo}}</span>

        <mat-expansion-panel class="contactData" [hidden]=!isLoggedIn>
          <mat-expansion-panel-header>
            <mat-panel-title>Contact Information</mat-panel-title>
          </mat-expansion-panel-header>
          <mat-panel-description>
            <p>Username: {{contactData.username}}</p>
            <p>Tel: {{contactData.tel}}</p>
            <p>email: {{contactData.email}}</p>
          </mat-panel-description>
        </mat-expansion-panel>
        <mat-card-actions>
          <button mat-button (click)="onDelete()" [hidden]="!isAdmin && (!offerItem.canBeDeleted || !isLoggedIn)">Delete</button>
          <button mat-button (click)="onSetPublic()" [hidden]="!offerItem.canBeSetPublic || !isAdmin">Set Public</button>
          <button mat-button (click)="onEdit()" [hidden]="!offerItem.canBeEdited || !isLoggedIn">Edit</button>
        </mat-card-actions>
      </mat-card-content>
    </mat-card>


    <div>
      <form (ngSubmit)="onSubmit()" #editForm="ngForm" [hidden]="!editing">
        <p>Note: Fields with an asterisk (*) must be filled in, other fields may be left empty.</p>
        <mat-form-field class="form-group">
          <mat-label>Title*</mat-label>
          <input matInput type="text" class="form-control" id="title" [(ngModel)]="offerItem.title" name="title" #title="ngModel"
                 required/>
          <div [hidden]="title.valid || title.pristine" class="alert alert-danger">
            You need a title for your offer.
          </div>
        </mat-form-field>
        <mat-form-field class="form-group" floatLabel="never"> <!--floatLabel is a workaround for a bug in material-->
          <mat-label>Description*</mat-label>
          <textarea matInput type="text" class="form-control" id="description" [(ngModel)]="offerItem.description"
                    name="description"
                    #description="ngModel" required>{{offerItem.description}}</textarea>
          <div [hidden]="description.valid || description.pristine" class="alert alert-danger">
            You need a description for your offer.
          </div>
        </mat-form-field>
        <mat-form-field class="form-group">
          <mat-label for="price">Price (per day/night; if billing is for another type, please leave empty and note in the
            description)</mat-label>
          <input matInput type="int" class="form-control" id="price" [(ngModel)]="offerItem.price" name="price"
                 #price="ngModel"/>
        </mat-form-field>
          <mat-form-field class="form-group">
            <mat-label>From:</mat-label>
            <input matInput [matDatepicker]="myDatepicker1" type="text" class="form-control" id="dateFrom"
                   [(ngModel)]="offerItem.dateFrom" name="dateFrom" #dateFrom="ngModel">
            <mat-datepicker-toggle matSuffix [for]="myDatepicker1"></mat-datepicker-toggle>
            <mat-datepicker #myDatepicker1></mat-datepicker>
          </mat-form-field>
          <mat-form-field class="form-group">
            <mat-label>To:</mat-label>
            <input matInput [matDatepicker]="myDatepicker2" type="text" class="form-control" id="dateTo"
                   [(ngModel)]="offerItem.dateTo" name="dateTo" #dateTo="ngModel">
            <mat-datepicker-toggle matSuffix [for]="myDatepicker2"></mat-datepicker-toggle>
            <mat-datepicker #myDatepicker2></mat-datepicker>
          </mat-form-field>
        <mat-form-field class="form-group">
          <mat-label>Category</mat-label>
          <mat-select class="form-control" id="category"
                  [(ngModel)]="offerItem.category" name="category" required>
            <mat-option *ngFor="let cat of categories" [value]="cat">{{cat}}</mat-option>
          </mat-select>
        </mat-form-field>
        <button mat-button type="submit" class="btn btn-success" [disabled]="!editForm.form.valid" (click)="onSave()">Save offer
        </button>
        <button mat-button (click)="onCancel()">Cancel</button>
      </form>
    </div>
  </div>
</div>
